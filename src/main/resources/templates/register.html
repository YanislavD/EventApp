<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äì EventApp</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body class="landing">
<header class="landing-header">
    <div class="container topbar">
        <a class="brand" th:href="@{/}">EventApp</a>
        <nav class="nav">
            <a class="nav-link" th:href="@{/login}">–í—Ö–æ–¥</a>
            <a class="nav-cta" th:href="@{/register}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            <button id="themeToggle" class="icon-btn" aria-label="–ü—Ä–µ–≤–∫–ª—é—á–∏ —Ç–µ–º–∞">üåì</button>
        </nav>
    </div>
</header>

<main>
    <section class="hero slim-hero">
        <div class="container hero-inner">
            <h1 class="hero-title">–°—ä–∑–¥–∞–π —Å–≤–æ—è –ø—Ä–æ—Ñ–∏–ª</h1>
            <p class="hero-subtitle">–ü—Ä–∏—Å—ä–µ–¥–∏–Ω–∏ —Å–µ –∏ –∑–∞–ø–æ—á–Ω–∏ –¥–∞ –æ—Ç–∫—Ä–∏–≤–∞—à –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞—à —Å—ä–±–∏—Ç–∏—è.</p>
        </div>
        <div class="hero-bg"></div>
    </section>

    <div class="container">
        <div class="card card-wide">
            <h2 class="mt-0">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <form method="post" th:action="@{/register}" th:object="${registerRequest}">

            <label for="username">
                <span>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ</span>
                <span class="badge-error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">–ù–µ–≤–∞–ª–∏–¥–Ω–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ</span>
            </label>
            <input id="username" th:field="*{username}" th:classappend="${#fields.hasErrors('username')} ? 'invalid'"/>

            <label for="email">
                <span>–ò–º–µ–π–ª</span>
                <span class="badge-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">–ù–µ–≤–∞–ª–∏–¥–µ–Ω –∏–º–µ–π–ª</span>
            </label>
            <input id="email" th:field="*{email}" type="email" th:classappend="${#fields.hasErrors('email')} ? 'invalid'"/>

            <label for="password">
                <span>–ü–∞—Ä–æ–ª–∞</span>
                <span class="badge-error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">–ù–µ–≤–∞–ª–∏–¥–Ω–∞ –ø–∞—Ä–æ–ª–∞</span>
            </label>
            <input id="password" th:field="*{password}" type="password" th:classappend="${#fields.hasErrors('password')} ? 'invalid'"/>

            <button type="submit" class="btn-wide">–°—ä–∑–¥–∞–π –∞–∫–∞—É–Ω—Ç</button>

            <p class="center mt-12">
                –ò–º–∞—à –∞–∫–∞—É–Ω—Ç? <a th:href="@{/login}" class="link">–í–ª–µ–∑</a>
            </p>
            </form>
        </div>
    </div>
</main>

<script>
    (function theme(){
        const btn = document.getElementById('themeToggle');
        if(!btn) return;
        const key = 'eventapp-theme';
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const saved = localStorage.getItem(key);
        const apply = (m)=>{ document.documentElement.dataset.theme = m; localStorage.setItem(key,m); };
        apply(saved || (prefersDark ? 'dark' : 'light'));
        btn.addEventListener('click', ()=> apply(document.documentElement.dataset.theme === 'dark' ? 'light' : 'dark'));
    })();
</script>
</body>
</html>