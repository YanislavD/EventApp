<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª ‚Äì EventApp</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="stylesheet" th:href="@{/css/home.css}" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    </head>
<body class="landing">
<header class="landing-header">
    <div class="container topbar">
        <a class="brand" th:href="@{/home}">EventApp</a>
        <nav class="nav">
            <a class="nav-link" th:href="@{/events}">–°—ä–±–∏—Ç–∏—è</a>
            <a class="nav-link" th:href="@{/admin/categories}" sec:authorize="hasRole('ADMIN')">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
            <a class="nav-link" th:href="@{/admin/users}" sec:authorize="hasRole('ADMIN')">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</a>
            <a class="nav-link" th:href="@{/logout}">–ò–∑—Ö–æ–¥</a>
        </nav>
    </div>
</header>

<main>
    <section class="hero slim-hero hero-slim-custom">
        <div class="hero-bg hero-bg-custom"></div>
        <div class="container hero-inner hero-inner-custom">
            <div class="hero-badge reveal">–¢–≤–æ–µ—Ç–æ —Ç–∞–±–ª–æ</div>
            <h1 class="hero-title hero-title-custom">
                <span th:text="${user != null ? '–ó–¥—Ä–∞–≤–µ–π, ' + user.username + '!' : '–ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª'}">–ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª</span>
                <span class="badge badge-admin" th:if="${user != null and user.role.name() == 'ADMIN'}" style="margin-left: 12px; vertical-align: middle;">ADMIN</span>
            </h1>
            <p class="hero-subtitle hero-subtitle-custom">–¢–≤–æ–∏—Ç–µ –∑–∞–ø–∏—Å–∞–Ω–∏ —Å—ä–±–∏—Ç–∏—è –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏ –ø—Ä–µ–∂–∏–≤—è–≤–∞–Ω–∏—è</p>
            
            <div class="hero-stats hero-stats-custom">
                <div class="stat reveal stat-custom">
                    <div class="stat-num stat-num-custom" th:text="${#lists.size(createdEvents)}">0</div>
                    <div class="stat-label stat-label-custom">–æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏ —Å—ä–±–∏—Ç–∏—è</div>
                </div>
                <div class="stat reveal stat-custom">
                    <div class="stat-num stat-num-custom" th:text="${#lists.size(subscribedEvents)}">0</div>
                    <div class="stat-label stat-label-custom">–º–æ–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                </div>
            </div>

            <div class="hero-actions hero-actions-custom">
                <div class="action-card-wrapper">
                    <a class="action-card reveal action-card-custom" th:href="@{/profile}">
                        <span class="action-icon">üë§</span>
                        <div>
                            <div class="action-title">–ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª</div>
                            <div class="action-text">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ —Å–∏ –∏ —Å–ª–µ–¥–∏ –∏—Å—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ —É—á–∞—Å—Ç–∏—è—Ç–∞.</div>
                        </div>
                    </a>
                    <a class="action-card reveal action-card-custom action-card-primary" th:href="@{/events}">
                        <span class="action-icon">üîç</span>
                        <div>
                            <div class="action-title">–û—Ç–∫—Ä–∏–π —Å—ä–±–∏—Ç–∏—è</div>
                            <div class="action-text">–†–∞–∑–≥–ª–µ–¥–∞–π –∫–∞–∫–≤–æ –ø—Ä–µ–¥—Å—Ç–æ–∏ –∏ —Å–µ –∑–∞–ø–∏—à–∏ —Å–∞–º–æ —Å –µ–¥–∏–Ω –∫–ª–∏–∫.</div>
                        </div>
                    </a>
                    <a class="action-card reveal action-card-custom action-card-primary" th:href="@{/events/new}">
                        <span class="action-icon">‚ûï</span>
                        <div>
                            <div class="action-title">–î–æ–±–∞–≤–∏ —Å—ä–±–∏—Ç–∏–µ</div>
                            <div class="action-text">–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–π —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Å—ä–±–∏—Ç–∏–µ –∏ –ø–æ–∫–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏.</div>
                        </div>
                    </a>
                </div>
                <div sec:authorize="hasRole('ADMIN')" class="action-card-wrapper">
                    <a class="action-card reveal action-card-custom action-card-secondary" th:href="@{/admin/categories}">
                        <span class="action-icon">üóÇÔ∏è</span>
                        <div>
                            <div class="action-title">–£–ø—Ä–∞–≤–ª—è–≤–∞–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                            <div class="action-text">–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–π –∫–∞—Ç–∞–ª–æ–≥–∞ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞ —Ü—è–ª–∞—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞.</div>
                        </div>
                    </a>
                    <a class="action-card reveal action-card-custom action-card-secondary" th:href="@{/admin/users}">
                        <span class="action-icon">üë•</span>
                        <div>
                            <div class="action-title">–£–ø—Ä–∞–≤–ª—è–≤–∞–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</div>
                            <div class="action-text">–ü—Ä–µ–≥–ª–µ–∂–¥–∞–π –∏ —É–ø—Ä–∞–≤–ª—è–≤–∞–π —Ä–æ–ª–∏—Ç–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞.</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <div class="quick-nav-sticky-wrapper">
        <div class="container">
            <div class="quick-nav-bar quick-nav-bar-sticky">
                <div class="quick-nav-title">–ë—ä—Ä–∑–∏ –ø—ä—Ç–∏—â–∞:</div>
                <div class="quick-nav-links">
                    <a href="#section-created" class="quick-nav-link quick-nav-link-primary">
                        <span class="quick-nav-icon">üìÖ</span>
                        <span class="quick-nav-text">–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏</span>
                    </a>
                    <a href="#section-subscribed" class="quick-nav-link quick-nav-link-success">
                        <span class="quick-nav-icon">üé´</span>
                        <span class="quick-nav-text">–ó–∞–ø–∏—Å–∞–Ω–∏</span>
                    </a>
                    <a href="#section-past-created" class="quick-nav-link quick-nav-link-warning" th:if="${!#lists.isEmpty(pastCreatedEvents)}">
                        <span class="quick-nav-icon">üìú</span>
                        <span class="quick-nav-text">–ò—Å—Ç–æ—Ä–∏—è (—Å—ä–∑–¥–∞–¥–µ–Ω–∏)</span>
                    </a>
                    <a href="#section-past-subscribed" class="quick-nav-link quick-nav-link-info" th:if="${!#lists.isEmpty(pastSubscribedEvents)}">
                        <span class="quick-nav-icon">‚≠ê</span>
                        <span class="quick-nav-text">–ò—Å—Ç–æ—Ä–∏—è (–∑–∞–ø–∏—Å–∞–Ω–∏)</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container home-sections home-sections-custom">

        <div class="card card-tips">
            <div class="tips-content">
                <span class="tips-icon">üí°</span>
                <div class="tips-text">
                    <div class="tips-title">–ü–æ–ª–µ–∑–Ω–∏ —Å—ä–≤–µ—Ç–∏</div>
                    <div class="tips-list">
                        <p>‚Ä¢ –ú–æ–∂–µ—à –¥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—à —Å—ä–±–∏—Ç–∏—è—Ç–∞ —Å–∏ –¥–æ—Ä–∏ —Å–ª–µ–¥ –∫–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–∞ —Å–µ –∑–∞–ø–∏—Å–∞–ª–∏</p>
                        <p>‚Ä¢ –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ —â–µ –ø—Ä–µ–º–∞—Ö–Ω–µ –∏ –≤—Å–∏—á–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                        <p>‚Ä¢ –ò–∑–ø–æ–ª–∑–≤–∞–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏—Ç–µ –∑–∞ –ø–æ-–ª–µ—Å–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –æ—Ç –¥—Ä—É–≥–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="section-created" class="events-section-card events-section-card-primary">
            <div class="events-section-header">
                <div class="events-section-icon-wrapper">
                    <div class="events-section-icon-bg events-section-icon-bg-primary">
                        <span class="events-section-icon">üìÖ</span>
                    </div>
                </div>
                <div class="events-section-title-wrapper">
                    <h2 class="mt-0 reveal section-title">–°—ä–±–∏—Ç–∏—è, –∫–æ–∏—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞—à</h2>
                    <p class="section-subtitle reveal">–ü—Ä–µ–≥–ª–µ–∂–¥–∞–π –∏ —É–ø—Ä–∞–≤–ª—è–≤–∞–π —Å—ä–±–∏—Ç–∏—è—Ç–∞, –∫–æ–∏—Ç–æ —Å–∏ —Å—ä–∑–¥–∞–ª</p>
                </div>
                <a th:href="@{/events/new}" class="btn reveal btn-primary-custom">
                    ‚ûï –î–æ–±–∞–≤–∏ —Å—ä–±–∏—Ç–∏–µ
                </a>
            </div>
            <div class="events-section-body">
            
            <div class="reveal" th:if="${param.updated}">
                <div class="alert alert-success alert-custom alert-success-custom">
                    <strong>‚úì –£—Å–ø–µ—Ö!</strong> –°—ä–±–∏—Ç–∏–µ—Ç–æ –±–µ—à–µ –æ–±–Ω–æ–≤–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ.
                </div>
            </div>
            <div class="reveal" th:if="${successMessage != null and !successMessage.startsWith('‚úì –û—Ü–µ–Ω–∫–∞—Ç–∞')}">
                <div class="alert alert-success alert-custom alert-success-custom">
                    <strong th:text="${#strings.substring(successMessage, 0, 7)}">‚úì –£—Å–ø–µ—Ö!</strong> <span th:text="${#strings.substring(successMessage, 8)}">–£—Å–ø–µ—à–Ω–æ —Å–µ –æ—Ç–ø–∏—Å–∞—Ö—Ç–µ –æ—Ç —Å—ä–±–∏—Ç–∏–µ—Ç–æ.</span>
                </div>
            </div>
            <div class="reveal" th:if="${param.deleted}">
                <div class="alert alert-success alert-custom alert-success-custom">
                    <strong>‚úì –£—Å–ø–µ—Ö!</strong> –°—ä–±–∏—Ç–∏–µ—Ç–æ –±–µ—à–µ –∏–∑—Ç—Ä–∏—Ç–æ —É—Å–ø–µ—à–Ω–æ.
                </div>
            </div>
            <div class="reveal" th:if="${param.error == 'unauthorized'}">
                <div class="alert alert-error alert-custom alert-error-custom">
                    <strong>‚ö† –ì—Ä–µ—à–∫–∞:</strong> –ù—è–º–∞—à –ø—Ä–∞–≤–æ –¥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—à/–∏–∑—Ç—Ä–∏–≤–∞—à —Ç–æ–≤–∞ —Å—ä–±–∏—Ç–∏–µ.
                </div>
            </div>
            <div class="reveal" th:if="${param.error == 'notFound'}">
                <div class="alert alert-error alert-custom alert-error-custom">
                    <strong>‚ö† –ì—Ä–µ—à–∫–∞:</strong> –°—ä–±–∏—Ç–∏–µ—Ç–æ –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω–æ.
                </div>
            </div>
            
            <div class="reveal empty-state" th:if="${#lists.isEmpty(createdEvents)}">
                <div class="empty-state-icon">üìÖ</div>
                <p class="empty-state-title">–í—Å–µ –æ—â–µ –Ω–µ —Å–∏ —Å—ä–∑–¥–∞–ª —Å—ä–±–∏—Ç–∏–µ</p>
                <p class="empty-state-text">–ó–∞–ø–æ—á–Ω–∏ —Å –±—É—Ç–æ–Ω–∞ ‚Äû–î–æ–±–∞–≤–∏ —Å—ä–±–∏—Ç–∏–µ"</p>
            </div>
            
            <div class="events-grid events-grid-custom" th:if="${!#lists.isEmpty(createdEvents)}">
                <article class="event-card reveal event-card-custom" th:each="event : ${createdEvents}">
                    <div class="event-card-accent-right"></div>
                    <div class="event-image-wrapper" th:if="${!#strings.isEmpty(event.imageName)}">
                        <img class="event-image" th:src="@{'/images/events/' + ${event.imageName}}" th:alt="${event.name}" />
                    </div>
                    <div class="event-content">
                        <h3 class="event-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h3>
                        <p class="event-description" th:text="${event.description}">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ</p>
                    </div>
                    <div class="meta meta-custom">
                        <div class="meta-item">
                            <span>üìÖ</span>
                            <span th:text="${event.startTime != null ? #temporals.format(event.startTime, 'dd.MM.yyyy HH:mm') : '–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞ TBA'}">–ù–∞—á–∞–ª–æ</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.location)}">
                            <span>üìç</span>
                            <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.categoryName)}">
                            <span>üè∑Ô∏è</span>
                            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <strong class="meta-strong" th:text="${event.categoryName}">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></span>
                        </div>
                        <div class="meta-item">
                            <span>üë•</span>
                            <span th:text="${event.capacity != null ? '–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç: ' + event.capacity : '–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç: –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω'}">–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç</span>
                        </div>
                    </div>
                    <div class="event-actions">
                        <a th:href="@{/events/{eventId}/participants(eventId=${event.id})}" class="btn btn-event-action btn-participants">
                            üë• –£—á–∞—Å—Ç–Ω–∏—Ü–∏ (<span th:text="${event.registeredCount}">0</span>)
                        </a>
                        <a th:href="@{/events/{eventId}/form(eventId=${event.id})}" class="btn btn-event-action btn-edit">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π
                        </a>
                        <form class="event-action-form" th:action="@{'/events/' + ${event.id}}" method="post">
                            <input type="hidden" name="_method" value="delete" />
                            <input type="hidden" name="redirect" value="home" />
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            <button type="submit" class="btn btn-event-action btn-delete">
                                üóëÔ∏è –ò–∑—Ç—Ä–∏–π
                            </button>
                        </form>
                    </div>
                </article>
            </div>
            </div>
        </div>

        <div id="section-subscribed" class="events-section-card events-section-card-success">
            <div class="events-section-header">
                <div class="events-section-icon-wrapper">
                    <div class="events-section-icon-bg events-section-icon-bg-success">
                        <span class="events-section-icon">üé´</span>
                    </div>
                </div>
                <div class="events-section-title-wrapper">
                    <h2 class="mt-0 reveal section-title">–°—ä–±–∏—Ç–∏—è, –∑–∞ –∫–æ–∏—Ç–æ —Å–∏ –∑–∞–ø–∏—Å–∞–Ω</h2>
                    <p class="section-subtitle reveal">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏ —Å—ä–±–∏—Ç–∏—è, –∑–∞ –∫–æ–∏—Ç–æ —Å–∏ —Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–ª</p>
                </div>
                <a th:href="@{/events}" class="btn reveal btn-primary-custom">
                    üîç –û—Ç–∫—Ä–∏–π —Å—ä–±–∏—Ç–∏—è
                </a>
            </div>
            <div class="events-section-body">
            
            <div class="reveal" th:if="${param.unsubscribed}">
                <div class="alert alert-success alert-custom alert-success-custom">
                    <strong>‚úì –£—Å–ø–µ—Ö!</strong> –£—Å–ø–µ—à–Ω–æ —Å–µ –æ—Ç–ø–∏—Å–∞—Ö—Ç–µ –æ—Ç —Å—ä–±–∏—Ç–∏–µ—Ç–æ.
                </div>
            </div>
            <div class="reveal" th:if="${param.notSubscribed}">
                <div class="alert alert-info alert-custom alert-info-custom">
                    <strong>‚Ñπ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> –ù–µ —Å—Ç–µ –∑–∞–ø–∏—Å–∞–Ω–∏ –∑–∞ —Ç–æ–≤–∞ —Å—ä–±–∏—Ç–∏–µ.
                </div>
            </div>
            <div class="reveal" th:if="${param.missing}">
                <div class="alert alert-error alert-custom alert-error-custom">
                    <strong>‚ö† –ì—Ä–µ—à–∫–∞:</strong> –°—ä–±–∏—Ç–∏–µ—Ç–æ –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω–æ.
                </div>
            </div>
            
            <div class="reveal empty-state" th:if="${#lists.isEmpty(subscribedEvents)}">
                <div class="empty-state-icon">üé´</div>
                <p class="empty-state-title">–í—Å–µ –æ—â–µ –Ω–µ —Å–∏ —Å–µ –∑–∞–ø–∏—Å–∞–ª –∑–∞ —Å—ä–±–∏—Ç–∏–µ</p>
                <p class="empty-state-text">–†–∞–∑–≥–ª–µ–¥–∞–π –Ω–∞–ª–∏—á–Ω–∏—Ç–µ –∏ —Å–µ –ø—Ä–∏—Å—ä–µ–¥–∏–Ω–∏</p>
            </div>
            
            <div class="events-grid events-grid-custom" th:if="${!#lists.isEmpty(subscribedEvents)}">
                <article class="event-card reveal event-card-custom" th:each="event : ${subscribedEvents}">
                    <div class="event-card-accent-left"></div>
                    <div class="event-image-wrapper" th:if="${!#strings.isEmpty(event.imageName)}">
                        <img class="event-image" th:src="@{'/images/events/' + ${event.imageName}}" th:alt="${event.name}" />
                    </div>
                    <div class="event-content">
                        <h3 class="event-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h3>
                        <p class="event-description" th:text="${event.description}">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ</p>
                    </div>
                    <div class="meta meta-custom">
                        <div class="meta-item">
                            <span>üìÖ</span>
                            <span th:text="${event.startTime != null ? #temporals.format(event.startTime, 'dd.MM.yyyy HH:mm') : '–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞ TBA'}">–ù–∞—á–∞–ª–æ</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.location)}">
                            <span>üìç</span>
                            <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.categoryName)}">
                            <span>üè∑Ô∏è</span>
                            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <strong class="meta-strong" th:text="${event.categoryName}">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.creatorName)}">
                            <span>üë§</span>
                            <span>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: <strong class="meta-strong-muted" th:text="${event.creatorName}">–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</strong></span>
                        </div>
                    </div>
                    <div th:if="${event.ticketCode != null}" class="ticket-toggle">
                        <button type="button"
                                class="ticket-toggle-btn"
                                th:attr="data-target-id=${'ticket-collapse-' + event.id}"
                                aria-expanded="false">
                            <span>üéüÔ∏è –ü–æ–∫–∞–∂–∏ –±–∏–ª–µ—Ç–∞</span>
                            <span class="ticket-toggle-icon">‚ñº</span>
                        </button>
                        <div class="ticket-collapse"
                             th:id="${'ticket-collapse-' + event.id}"
                             aria-hidden="true">
                            <div class="ticket-card">
                                <div class="ticket-card-header">
                                    <div>
                                        <div class="ticket-card-title">–¢–≤–æ—è—Ç –±–∏–ª–µ—Ç</div>
                                        <div class="ticket-card-note">–ü–æ–∫–∞–∂–∏ –∫–æ–¥–∞ –Ω–∞ –≤—Ö–æ–¥–∞ –∏–ª–∏ –æ—Ç–≤–æ—Ä–∏ QR –∑–∞ –º–æ–º–µ–Ω—Ç–∞–ª–Ω–æ —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ.</div>
                                    </div>
                                    <span class="ticket-code" th:text="${event.ticketCode}">0000-0000</span>
                                </div>
                                <div class="ticket-actions">
                                    <div class="ticket-actions-row">
                                        <button type="button"
                                                class="btn btn-primary"
                                                th:attr="data-ticket-code=${event.ticketCode},data-event-name=${event.name}"
                                                onclick="window.eventTicketModal && window.eventTicketModal.open(this)">
                                            üì≤ –ü–æ–∫–∞–∂–∏ QR
                                        </button>
                                        <a class="btn btn-secondary"
                                           th:href="@{'/tickets/' + ${event.ticketCode} + '/qr'}"
                                           download>
                                            ‚¨áÔ∏è –ò–∑—Ç–µ–≥–ª–∏ QR
                                        </a>
                                    </div>
                                    <form th:action="@{'/events/' + ${event.id} + '/subscriptions'}" method="post">
                                        <input type="hidden" name="_method" value="delete" />
                                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                        <button type="submit" class="btn btn-secondary">
                                            üö´ –û—Ç–ø–∏—à–∏ —Å–µ
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="unsubscribe-form" th:if="${event.ticketCode == null}">
                        <form th:action="@{'/events/' + ${event.id} + '/subscriptions'}" method="post">
                            <input type="hidden" name="_method" value="delete" />
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            <button type="submit" class="btn btn-secondary btn-unsubscribe">
                                üö´ –û—Ç–ø–∏—à–∏ —Å–µ
                            </button>
                        </form>
                    </div>
                </article>
            </div>
            </div>
        </div>

        <div id="section-past-created" class="events-section-card events-section-card-warning" th:if="${!#lists.isEmpty(pastCreatedEvents)}">
            <div class="events-section-header">
                <div class="events-section-icon-wrapper">
                    <div class="events-section-icon-bg events-section-icon-bg-warning">
                        <span class="events-section-icon">üìú</span>
                    </div>
                </div>
                <div class="events-section-title-wrapper">
                    <h2 class="mt-0 reveal section-title">–ò–∑—Ç–µ–∫–ª–∏ —Å—ä–±–∏—Ç–∏—è, –∫–æ–∏—Ç–æ —Å–∏ —Å—ä–∑–¥–∞–ª</h2>
                    <p class="section-subtitle reveal">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ —Ç–≤–æ–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏ —Å—ä–±–∏—Ç–∏—è</p>
                </div>
            </div>
            <div class="events-section-body">
            
            <div class="events-grid events-grid-custom">
                <article class="event-card reveal event-card-custom event-card-past" th:each="event : ${pastCreatedEvents}">
                    <div class="event-card-accent-right event-card-accent-past"></div>
                    <div class="event-image-wrapper" th:if="${!#strings.isEmpty(event.imageName)}">
                        <img class="event-image" th:src="@{'/images/events/' + ${event.imageName}}" th:alt="${event.name}" />
                    </div>
                    <div class="event-content">
                        <h3 class="event-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h3>
                        <p class="event-description" th:text="${event.description}">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ</p>
                    </div>
                    <div class="meta meta-custom">
                        <div class="meta-item">
                            <span>üìÖ</span>
                            <span th:text="${event.startTime != null ? #temporals.format(event.startTime, 'dd.MM.yyyy HH:mm') : '–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞ TBA'}">–ù–∞—á–∞–ª–æ</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.location)}">
                            <span>üìç</span>
                            <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.categoryName)}">
                            <span>üè∑Ô∏è</span>
                            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <strong class="meta-strong" th:text="${event.categoryName}">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></span>
                        </div>
                        <div class="meta-item">
                            <span>üë•</span>
                            <span th:text="${event.capacity != null ? '–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç: ' + event.capacity : '–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç: –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω'}">–ö–∞–ø–∞—Ü–∏—Ç–µ—Ç</span>
                        </div>
                    </div>
                </article>
            </div>
            </div>
        </div>

        <div id="section-past-subscribed" class="events-section-card events-section-card-info" th:if="${!#lists.isEmpty(pastSubscribedEvents)}">
            <div class="events-section-header">
                <div class="events-section-icon-wrapper">
                    <div class="events-section-icon-bg events-section-icon-bg-info">
                        <span class="events-section-icon">‚≠ê</span>
                    </div>
                </div>
                <div class="events-section-title-wrapper">
                    <h2 class="mt-0 reveal section-title">–ò–∑—Ç–µ–∫–ª–∏ —Å—ä–±–∏—Ç–∏—è, –∑–∞ –∫–æ–∏—Ç–æ —Å–∏ –±–∏–ª –∑–∞–ø–∏—Å–∞–Ω</h2>
                    <p class="section-subtitle reveal">–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ —Ç–≤–æ–∏—Ç–µ —É—á–∞—Å—Ç–∏—è</p>
                </div>
            </div>
            <div class="events-section-body">
            
            <div class="reveal" th:if="${successMessage != null and successMessage.startsWith('‚úì –û—Ü–µ–Ω–∫–∞—Ç–∞')}">
                <div class="alert alert-success alert-custom alert-success-custom alert-rating-success">
                    <strong th:text="${successMessage}">‚úì –û—Ü–µ–Ω–∫–∞—Ç–∞ –±–µ—à–µ –¥–æ–±–∞–≤–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!</strong>
                </div>
            </div>
            
            <div class="events-grid events-grid-custom">
                <article class="event-card reveal event-card-custom event-card-past" th:each="event : ${pastSubscribedEvents}">
                    <div class="event-card-accent-left event-card-accent-past"></div>
                    <div class="event-image-wrapper" th:if="${!#strings.isEmpty(event.imageName)}">
                        <img class="event-image" th:src="@{'/images/events/' + ${event.imageName}}" th:alt="${event.name}" />
                    </div>
                    <div class="event-content">
                        <h3 class="event-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h3>
                        <p class="event-description" th:text="${event.description}">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ</p>
                    </div>
                    <div class="meta meta-custom">
                        <div class="meta-item">
                            <span>üìÖ</span>
                            <span th:text="${event.startTime != null ? #temporals.format(event.startTime, 'dd.MM.yyyy HH:mm') : '–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞ TBA'}">–ù–∞—á–∞–ª–æ</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.location)}">
                            <span>üìç</span>
                            <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.categoryName)}">
                            <span>üè∑Ô∏è</span>
                            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <strong class="meta-strong" th:text="${event.categoryName}">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></span>
                        </div>
                        <div class="meta-item" th:if="${!#strings.isEmpty(event.creatorName)}">
                            <span>üë§</span>
                            <span>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: <strong class="meta-strong-muted" th:text="${event.creatorName}">–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</strong></span>
                        </div>
                    </div>
                    <div class="rating-section">
                        <div class="rating-header">
                            <strong>‚≠ê –°—Ä–µ–¥–Ω–∞ –æ—Ü–µ–Ω–∫–∞:</strong>
                            <span class="rating-average" th:if="${ratingsMap != null and ratingsMap.containsKey(event.id) and ratingsMap.get(event.id).averageScore != null}" 
                                  th:text="${#numbers.formatDecimal(ratingsMap.get(event.id).averageScore, 1, 2)}">-</span>
                            <span class="rating-average" th:if="${ratingsMap == null or !ratingsMap.containsKey(event.id) or ratingsMap.get(event.id).averageScore == null}">-</span>
                            <span class="rating-count">
                                –æ—Ç <span th:text="${ratingsMap != null and ratingsMap.containsKey(event.id) ? ratingsMap.get(event.id).totalRatings : 0}">0</span> –≥–ª–∞—Å—É–≤–∞–ª–∏
                            </span>
                        </div>
                        <div class="rating-buttons" th:if="${hasRatedMap != null and hasRatedMap.containsKey(event.id) and !hasRatedMap.get(event.id)}">
                            <form class="rating-form" th:action="@{/ratings}" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" name="eventId" th:value="${event.id}" />
                                <input type="hidden" name="score" value="1" />
                                <button type="submit" class="rating-btn rating-btn-1">1</button>
                            </form>
                            <form class="rating-form" th:action="@{/ratings}" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" name="eventId" th:value="${event.id}" />
                                <input type="hidden" name="score" value="2" />
                                <button type="submit" class="rating-btn rating-btn-2">2</button>
                            </form>
                            <form class="rating-form" th:action="@{/ratings}" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" name="eventId" th:value="${event.id}" />
                                <input type="hidden" name="score" value="3" />
                                <button type="submit" class="rating-btn rating-btn-3">3</button>
                            </form>
                            <form class="rating-form" th:action="@{/ratings}" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" name="eventId" th:value="${event.id}" />
                                <input type="hidden" name="score" value="4" />
                                <button type="submit" class="rating-btn rating-btn-4">4</button>
                            </form>
                            <form class="rating-form" th:action="@{/ratings}" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" name="eventId" th:value="${event.id}" />
                                <input type="hidden" name="score" value="5" />
                                <button type="submit" class="rating-btn rating-btn-5">5</button>
                            </form>
                        </div>
                    </div>
                </article>
            </div>
            </div>
        </div>

        <div class="card card-margin-top card-padding">
            <div class="quick-links-grid">
                <div class="reveal">
                    <div class="quick-link-item">
                        <span class="quick-link-icon">üìã</span>
                        <h3 class="quick-link-title">–ë—ä—Ä–∑–∏ —Å—Ç—ä–ø–∫–∏</h3>
                    </div>
                    <ul class="quick-link-list">
                        <li>–°—ä–∑–¥–∞–π –Ω–æ–≤–æ —Å—ä–±–∏—Ç–∏–µ</li>
                        <li>–†–∞–∑–≥–ª–µ–¥–∞–π –Ω–∞–ª–∏—á–Ω–∏—Ç–µ —Å—ä–±–∏—Ç–∏—è</li>
                        <li>–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –ø—Ä–æ—Ñ–∏–ª–∞ —Å–∏</li>
                    </ul>
                </div>
                <div class="reveal">
                    <div class="quick-link-item">
                        <span class="quick-link-icon">‚ö°</span>
                        <h3 class="quick-link-title">–ë—ä—Ä–∑–∏ –≤—Ä—ä–∑–∫–∏</h3>
                    </div>
                    <div class="quick-link-links">
                        <a class="quick-link" th:href="@{/events}">üîç –û—Ç–∫—Ä–∏–π —Å—ä–±–∏—Ç–∏—è ‚Üí</a>
                        <a class="quick-link" th:href="@{/events/new}">‚ûï –°—ä–∑–¥–∞–π –Ω–æ–≤–æ —Å—ä–±–∏—Ç–∏–µ ‚Üí</a>
                        <a class="quick-link" th:href="@{/profile}">üë§ –ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card reveal card-margin-top card-padding">
            <div class="faq-header">
                <span class="faq-icon-header">‚ùì</span>
                <h3 class="faq-title">–ß–µ—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏</h3>
            </div>
            <div class="faq-container-custom">
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫ –¥–∞ —Å—ä–∑–¥–∞–º –Ω–æ–≤–æ —Å—ä–±–∏—Ç–∏–µ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –ò–∑–ø–æ–ª–∑–≤–∞–π –±—É—Ç–æ–Ω–∞ "–î–æ–±–∞–≤–∏ —Å—ä–±–∏—Ç–∏–µ" –≤ —Ç–∞–±–ª–æ—Ç–æ –∏–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è—Ç–∞. –ü–æ–ø—ä–ª–Ω–∏ –≤—Å–∏—á–∫–∏ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞: –∏–º–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –ª–æ–∫–∞—Ü–∏—è, –¥–∞—Ç–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ú–æ–≥–∞ –ª–∏ –¥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–º —Å—ä–±–∏—Ç–∏–µ —Å–ª–µ–¥ –∫–∞—Ç–æ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–æ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –î–∞, –º–æ–∂–µ—à –¥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—à —Å–∞–º–æ —Å—ä–±–∏—Ç–∏—è, –∫–æ–∏—Ç–æ —Å–∏ —Å—ä–∑–¥–∞–ª. –ò–∑–ø–æ–ª–∑–≤–∞–π –±—É—Ç–æ–Ω–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π" –≤ –∫–∞—Ä—Ç–∞—Ç–∞ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫ –¥–∞ –≤–∏–¥—è –∫–æ–π –µ –∑–∞–ø–∏—Å–∞–ª –∑–∞ –º–æ–µ—Ç–æ —Å—ä–±–∏—Ç–∏–µ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –û—Ç–≤–æ—Ä–∏ —Å—ä–±–∏—Ç–∏–µ—Ç–æ –≤ —Ç–∞–±–ª–æ—Ç–æ –∏ –Ω–∞—Ç–∏—Å–Ω–∏ –±—É—Ç–æ–Ω–∞ "–£—á–∞—Å—Ç–Ω–∏—Ü–∏". –¢–∞–º —â–µ –≤–∏–¥–∏—à —Å–ø–∏—Å—ä–∫ —Å –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∞–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫–≤–æ –µ –±–∏–ª–µ—Ç—ä—Ç –∏ –∑–∞—â–æ –µ –Ω—É–∂–µ–Ω?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –í—Å–µ–∫–∏ –∑–∞–ø–∏—Å–∞–Ω —É—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–ª—É—á–∞–≤–∞ —É–Ω–∏–∫–∞–ª–µ–Ω –±–∏–ª–µ—Ç —Å QR –∫–æ–¥. –¢–æ–π —Å–ª—É–∂–∏ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ç–∞ –∏ –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –ø—Ä–∏ –≤—Ö–æ–¥–∞ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ú–æ–≥–∞ –ª–∏ –¥–∞ —Å–µ –∑–∞–ø–∏—à–∞ –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–æ —Å—ä–±–∏—Ç–∏–µ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –ù–µ, –Ω–µ –º–æ–∂–µ—à –¥–∞ —Å–µ –∑–∞–ø–∏—à–µ—à –∑–∞ —Å—ä–±–∏—Ç–∏–µ, –∫–æ–µ—Ç–æ —Å–∏ —Å—ä–∑–¥–∞–ª.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫ –º–æ–≥–∞ –¥–∞ –æ—Ç–ø–∏—à–∞ —Å–µ –æ—Ç —Å—ä–±–∏—Ç–∏–µ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –ò–∑–ø–æ–ª–∑–≤–∞–π –±—É—Ç–æ–Ω–∞ "–û—Ç–ø–∏—à–∏ —Å–µ" –≤ –∫–∞—Ä—Ç–∞—Ç–∞ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ –∏–ª–∏ –≤ —Å–ø–∏—Å—ä–∫–∞ —Å —Ç–≤–æ–∏—Ç–µ –∑–∞–ø–∏—Å–∞–Ω–∏ —Å—ä–±–∏—Ç–∏—è.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫ —Ä–∞–±–æ—Ç–∏ –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç—ä—Ç –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –ö–∞—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –º–æ–∂–µ—à –¥–∞ –∑–∞–¥–∞–¥–µ—à –º–∞–∫—Å–∏–º–∞–ª–µ–Ω –±—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏—Ü–∏. –ö–æ–≥–∞—Ç–æ –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç—ä—Ç –µ –∑–∞–ø—ä–ª–Ω–µ–Ω, –Ω–æ–≤–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –Ω—è–º–∞ –¥–∞ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç. –ê–∫–æ –Ω–µ –∑–∞–¥–∞–¥–µ—à –∫–∞–ø–∞—Ü–∏—Ç–µ—Ç, —Å—ä–±–∏—Ç–∏–µ—Ç–æ –µ —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω –±—Ä–æ–π –º–µ—Å—Ç–∞.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ú–æ–≥–∞ –ª–∏ –¥–∞ –∏–∑—Ç—Ä–∏—è —Å—ä–±–∏—Ç–∏–µ —Å–ª–µ–¥ –∫–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–∞ —Å–µ –∑–∞–ø–∏—Å–∞–ª–∏?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –î–∞, –Ω–æ –≤–Ω–∏–º–∞–≤–∞–π! –ü—Ä–∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ –≤—Å–∏—á–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –±–∏–ª–µ—Ç–∏ —â–µ –±—ä–¥–∞—Ç –ø—Ä–µ–º–∞—Ö–Ω–∞—Ç–∏. –£—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ –Ω—è–º–∞ –¥–∞ –ø–æ–ª—É—á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
                                </div>
                            </div>
                        </div>
                        <div class="faq-item-custom">
                            <button class="faq-question-custom" type="button">
                                <span>–ö–∞–∫–≤–æ –æ–∑–Ω–∞—á–∞–≤–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è?</span>
                                <span class="faq-icon-custom">+</span>
                            </button>
                            <div class="faq-answer-custom">
                                <div class="faq-answer-content">
                                    –ù–µ–∞–∫—Ç–∏–≤–Ω–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∏ —Å—ä–±–∏—Ç–∏—è, –Ω–æ —Å—ä–±–∏—Ç–∏—è —Å —Ç–∞–∫–∏–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Å—Ç–∞–≤–∞—Ç –≤–∏–¥–∏–º–∏. –°–∞–º–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞—Ç/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
                                </div>
                            </div>
                        </div>
                    </div>
        </div>
    </div>
</main>

<th:block th:replace="~{fragments/footer :: siteFooter}"></th:block>

<script>
    const onReveal = (entries, observer) => {
        entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('revealed'); observer.unobserve(e.target);} });
    };
    const observer = new IntersectionObserver(onReveal, { threshold: 0.15 });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // Smooth scroll for quick navigation links
    document.querySelectorAll('.quick-nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                const offset = 100; // Offset for sticky header if needed
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - offset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    // FAQ Accordion functionality
    document.querySelectorAll('.faq-question-custom').forEach(button => {
        button.addEventListener('click', function() {
            const faqItem = this.closest('.faq-item-custom');
            const answer = faqItem.querySelector('.faq-answer-custom');
            const icon = this.querySelector('.faq-icon-custom');
            const isOpen = answer.style.maxHeight && answer.style.maxHeight !== '0px';

            // Close all other FAQ items
            document.querySelectorAll('.faq-item-custom').forEach(item => {
                if (item !== faqItem) {
                    const otherAnswer = item.querySelector('.faq-answer-custom');
                    const otherIcon = item.querySelector('.faq-icon-custom');
                    otherAnswer.style.maxHeight = '0px';
                    otherIcon.textContent = '+';
                    otherIcon.style.transform = 'rotate(0deg)';
                }
            });

            // Toggle current item
            if (isOpen) {
                answer.style.maxHeight = '0px';
                icon.textContent = '+';
                icon.style.transform = 'rotate(0deg)';
            } else {
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.textContent = '‚àí';
                icon.style.transform = 'rotate(0deg)';
            }
        });
    });

    (function(){
        if (window.eventTicketModal) return;
        const modal = document.createElement('div');
        modal.className = 'ticket-modal-backdrop';
        modal.innerHTML = `
            <div class="ticket-modal-card" role="dialog" aria-modal="true" aria-labelledby="ticketModalTitle">
                <button type="button" class="ticket-modal-close" aria-label="–ó–∞—Ç–≤–æ—Ä–∏">‚úï</button>
                <div class="ticket-modal-body">
                    <p id="ticketModalSubtitle" class="ticket-modal-subtitle">–ë–∏–ª–µ—Ç</p>
                    <h2 id="ticketModalTitle" class="ticket-modal-title">–ü–æ–∫–∞–∂–∏ —Ç–æ–∑–∏ QR –∫–æ–¥ –ø—Ä–∏ –≤—Ö–æ–¥</h2>
                    <img id="ticketModalQr" class="ticket-modal-qr" alt="QR –∫–æ–¥" src="" />
                    <code id="ticketModalCode" class="ticket-modal-code">0000-0000</code>
                    <div class="ticket-modal-actions">
                        <a id="ticketModalDownload" class="btn btn-primary ticket-modal-download" download>‚¨áÔ∏è –ò–∑—Ç–µ–≥–ª–∏ QR</a>
                        <button type="button" id="ticketModalCopy" class="btn btn-secondary ticket-modal-copy">üìã –ö–æ–ø–∏—Ä–∞–π –∫–æ–¥–∞</button>
                    </div>
                </div>
            </div>`;
        document.body.appendChild(modal);

        const closeBtn = modal.querySelector('.ticket-modal-close');
        const qrImg = modal.querySelector('#ticketModalQr');
        const codeEl = modal.querySelector('#ticketModalCode');
        const subtitleEl = modal.querySelector('#ticketModalSubtitle');
        const downloadLink = modal.querySelector('#ticketModalDownload');
        const copyBtn = modal.querySelector('#ticketModalCopy');

        const closeModal = () => {
            modal.style.display = 'none';
            qrImg.src = '';
        };

        closeBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modal.style.display === 'flex') closeModal(); });

        copyBtn.addEventListener('click', async () => {
            const code = codeEl.textContent?.trim();
            if (!code) return;
            try {
                await navigator.clipboard.writeText(code);
                const original = copyBtn.textContent;
                copyBtn.textContent = '‚úÖ –ö–æ–ø–∏—Ä–∞–Ω–æ';
                setTimeout(() => { copyBtn.textContent = original; }, 2000);
            } catch (err) {
                console.error('Clipboard copy failed', err);
            }
        });

        window.eventTicketModal = {
            open(trigger) {
                if (!trigger) return;
                const code = trigger.getAttribute('data-ticket-code');
                if (!code) return;
                const eventName = trigger.getAttribute('data-event-name') || '';
                modal.style.display = 'flex';
                qrImg.src = `/tickets/${code}/qr`;
                qrImg.alt = `QR –∫–æ–¥ –∑–∞ –±–∏–ª–µ—Ç ${code}`;
                codeEl.textContent = code;
                subtitleEl.textContent = eventName ? `–ë–∏–ª–µ—Ç –∑–∞ ${eventName}` : '–ë–∏–ª–µ—Ç';
                downloadLink.href = `/tickets/${code}/qr`;
                closeBtn.focus();
            }
        };
    })();

    document.querySelectorAll('.ticket-toggle-btn').forEach(btn => {
        const targetId = btn.getAttribute('data-target-id');
        const collapse = targetId ? document.getElementById(targetId) : null;
        const icon = btn.querySelector('.ticket-toggle-icon');
        if (!collapse) return;
        btn.addEventListener('click', () => {
            const isOpen = collapse.classList.toggle('is-open');
            collapse.setAttribute('aria-hidden', (!isOpen).toString());
            btn.setAttribute('aria-expanded', isOpen.toString());
            if (icon) {
                icon.textContent = isOpen ? '‚ñ≤' : '‚ñº';
            }
        });
    });
</script>

</body>
</html>






