<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–£—á–∞—Å—Ç–Ω–∏—Ü–∏ ‚Äì EventApp</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="landing">
<header class="landing-header">
    <div class="container topbar">
        <a class="brand" th:href="@{/}">EventApp</a>
        <nav class="nav">
            <a class="nav-link" th:href="@{/home}">–¢–∞–±–ª–æ</a>
            <a class="nav-link" th:href="@{/events}">–°—ä–±–∏—Ç–∏—è</a>
            <a class="nav-link" th:href="@{/admin/categories}" sec:authorize="hasRole('ADMIN')">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
            <a class="nav-link" th:href="@{/admin/users}" sec:authorize="hasRole('ADMIN')">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</a>
            <a class="nav-link" th:href="@{/logout}">–ò–∑—Ö–æ–¥</a>
        </nav>
    </div>
</header>

<main>
    <section class="hero slim-hero" style="padding: 60px 0 56px; position: relative; overflow: hidden;">
        <div class="hero-bg" style="position: absolute; inset: 0; height: 100%; background: radial-gradient(1100px 420px at 50% 0px, rgba(79, 70, 229, .18), rgba(79, 70, 229, 0) 65%), linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.05) 100%); pointer-events: none; z-index: 0;"></div>
        <div class="container hero-inner" style="position: relative; z-index: 1;">
            <div class="hero-badge reveal">–£—á–∞—Å—Ç–Ω–∏—Ü–∏</div>
            <h1 class="hero-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h1>
            <p class="hero-subtitle">–°–ø–∏—Å—ä–∫ —Å –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏</p>
        </div>
    </section>

    <div class="container" style="margin-top: 48px;">
        <div class="card" style="margin-bottom: 32px; padding: 24px; background: linear-gradient(135deg, rgba(79, 70, 229, 0.05) 0%, rgba(79, 70, 229, 0.02) 100%); border: 1px solid rgba(79, 70, 229, 0.1);">
            <div style="display: flex; align-items: flex-start; gap: 12px;">
                <span style="font-size: 24px; flex-shrink: 0;">‚ÑπÔ∏è</span>
                <div style="flex: 1;">
                    <div style="font-weight: 700; font-size: 15px; margin-bottom: 6px; color: #4f46e5;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</div>
                    <div style="color: var(--muted); font-size: 13px; line-height: 1.6;">
                        <p style="margin: 0 0 8px 0;" th:if="${event.location != null}">
                            <strong>üìç –õ–æ–∫–∞—Ü–∏—è:</strong> <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </p>
                        <p style="margin: 0 0 8px 0;" th:if="${event.startTime != null}">
                            <strong>üìÖ –ù–∞—á–∞–ª–æ:</strong> <span th:text="${#temporals.format(event.startTime, 'dd.MM.yyyy HH:mm')}">–î–∞—Ç–∞</span>
                        </p>
                        <p style="margin: 0;" th:if="${event.capacity != null}">
                            <strong>üë• –ö–∞–ø–∞—Ü–∏—Ç–µ—Ç:</strong> <span th:text="${event.capacity}">0</span> –º–µ—Å—Ç–∞
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" style="margin-bottom: 32px;">
            <div style="padding: 24px; border-bottom: 1px solid var(--border);">
                <h2 style="margin: 0; font-size: 24px; font-weight: 700; display: flex; align-items: center; gap: 12px;">
                    <span>üë•</span>
                    <span>–ó–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏ (<span th:text="${#lists.size(subscriptions)}">0</span>)</span>
                </h2>
            </div>

            <div th:if="${#lists.isEmpty(subscriptions)}" style="padding: 48px 24px; text-align: center; color: var(--muted);">
                <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
                <p style="margin: 0; font-size: 16px; font-weight: 600;">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –∑–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏</p>
                <p style="margin: 8px 0 0 0; font-size: 14px;">–ö–æ–≥–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–µ –∑–∞–ø–∏—à–∞—Ç, —Ç–µ —â–µ —Å–µ –ø–æ—è–≤—è—Ç —Ç—É–∫</p>
            </div>

            <div th:if="${!#lists.isEmpty(subscriptions)}" style="padding: 24px;">
                <div style="display: grid; grid-template-columns: 1fr; gap: 16px;">
                    <div th:each="subscription : ${subscriptions}" class="participant-card" style="background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.2s ease;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 16px; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 200px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                    <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px; flex-shrink: 0;">
                                        <span th:text="${subscription.user != null ? subscription.user.username.substring(0, 1).toUpperCase() : '?'}">U</span>
                                    </div>
                                    <div>
                                        <div style="font-weight: 700; font-size: 16px; margin-bottom: 4px;" th:text="${subscription.user != null ? subscription.user.username : '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª'}">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</div>
                                        <div style="color: var(--muted); font-size: 13px;" th:text="${subscription.user != null ? subscription.user.email : 'N/A'}">email@example.com</div>
                                    </div>
                                </div>
                                <div style="display: flex; flex-wrap: wrap; gap: 16px; font-size: 13px; color: var(--muted);">
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <span>üìÖ</span>
                                        <span>–ó–∞–ø–∏—Å–∞–Ω –Ω–∞: <strong th:text="${subscription.subscriptionTime != null ? #temporals.format(subscription.subscriptionTime, 'dd.MM.yyyy HH:mm') : 'N/A'}">–î–∞—Ç–∞</strong></span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px; align-items: flex-end;">
                                <div th:if="${subscription.id != null}" style="padding: 8px 12px; background: rgba(79, 70, 229, 0.1); border-radius: 8px; font-size: 12px; font-weight: 600; color: #4f46e5; font-family: monospace;">
                                    ID: <span th:text="${#strings.substring(subscription.id.toString(), 0, 8)}">...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 32px;">
            <a th:href="@{/home}" class="btn" style="padding: 12px 24px; text-decoration: none; display: inline-block; background: #4f46e5; color: #fff; border-radius: 8px;">
                ‚Üê –ù–∞–∑–∞–¥ –∫—ä–º —Ç–∞–±–ª–æ—Ç–æ
            </a>
        </div>
    </div>
</main>

<th:block th:replace="~{fragments/footer :: siteFooter}"></th:block>
</body>
</html>

