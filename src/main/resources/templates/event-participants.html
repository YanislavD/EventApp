<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–£—á–∞—Å—Ç–Ω–∏—Ü–∏ ‚Äì EventApp</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="stylesheet" th:href="@{/css/participants.css}" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="landing">
<header class="landing-header">
    <div class="container topbar">
        <a class="brand" th:href="@{/}">EventApp</a>
        <nav class="nav">
            <a class="nav-link" th:href="@{/home}">–¢–∞–±–ª–æ</a>
            <a class="nav-link" th:href="@{/events}">–°—ä–±–∏—Ç–∏—è</a>
            <a class="nav-link" th:href="@{/admin/categories}" sec:authorize="hasRole('ADMIN')">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
            <a class="nav-link" th:href="@{/admin/users}" sec:authorize="hasRole('ADMIN')">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</a>
            <a class="nav-link" th:href="@{/logout}">–ò–∑—Ö–æ–¥</a>
        </nav>
    </div>
</header>

<main>
    <section class="hero slim-hero hero-participants">
        <div class="hero-bg hero-bg-participants"></div>
        <div class="container hero-inner hero-inner-participants">
            <div class="hero-badge reveal">–£—á–∞—Å—Ç–Ω–∏—Ü–∏</div>
            <h1 class="hero-title" th:text="${event.name}">–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</h1>
            <p class="hero-subtitle">–°–ø–∏—Å—ä–∫ —Å –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏</p>
        </div>
    </section>

    <div class="container container-margin-top">
        <div class="card info-card-participants">
            <div class="info-card-content">
                <span class="info-card-icon">‚ÑπÔ∏è</span>
                <div class="info-card-body">
                    <div class="info-card-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ</div>
                    <div class="info-card-text">
                        <p th:if="${event.location != null}">
                            <strong>üìç –õ–æ–∫–∞—Ü–∏—è:</strong> <span th:text="${event.location}">–õ–æ–∫–∞—Ü–∏—è</span>
                        </p>
                        <p th:if="${event.startTime != null}">
                            <strong>üìÖ –ù–∞—á–∞–ª–æ:</strong> <span th:text="${#temporals.format(event.startTime, 'dd.MM.yyyy HH:mm')}">–î–∞—Ç–∞</span>
                        </p>
                        <p th:if="${event.capacity != null}">
                            <strong>üë• –ö–∞–ø–∞—Ü–∏—Ç–µ—Ç:</strong> <span th:text="${event.capacity}">0</span> –º–µ—Å—Ç–∞
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card card-margin-bottom">
            <div class="participants-header">
                <h2 class="participants-title">
                    <span>üë•</span>
                    <span>–ó–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏ (<span th:text="${#lists.size(subscriptions)}">0</span>)</span>
                </h2>
            </div>

            <div th:if="${#lists.isEmpty(subscriptions)}" class="empty-participants">
                <div class="empty-participants-icon">üì≠</div>
                <p class="empty-participants-title">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –∑–∞–ø–∏—Å–∞–Ω–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏</p>
                <p class="empty-participants-text">–ö–æ–≥–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–µ –∑–∞–ø–∏—à–∞—Ç, —Ç–µ —â–µ —Å–µ –ø–æ—è–≤—è—Ç —Ç—É–∫</p>
            </div>

            <div th:if="${!#lists.isEmpty(subscriptions)}" class="participants-list">
                <div class="participants-grid">
                    <div th:each="subscription : ${subscriptions}" class="participant-card">
                        <div class="participant-card-content">
                            <div class="participant-info">
                                <div class="participant-header">
                                    <div class="participant-avatar">
                                        <span th:text="${subscription.user != null ? subscription.user.username.substring(0, 1).toUpperCase() : '?'}">U</span>
                                    </div>
                                    <div>
                                        <div class="participant-name" th:text="${subscription.user != null ? subscription.user.username : '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª'}">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</div>
                                        <div class="participant-email" th:text="${subscription.user != null ? subscription.user.email : 'N/A'}">email@example.com</div>
                                    </div>
                                </div>
                                <div class="participant-meta">
                                    <div class="participant-meta-item">
                                        <span>üìÖ</span>
                                        <span>–ó–∞–ø–∏—Å–∞–Ω –Ω–∞: <strong th:text="${subscription.subscriptionTime != null ? #temporals.format(subscription.subscriptionTime, 'dd.MM.yyyy HH:mm') : 'N/A'}">–î–∞—Ç–∞</strong></span>
                                    </div>
                                </div>
                            </div>
                            <div class="participant-actions">
                                <div th:if="${subscription.id != null}" class="participant-id">
                                    ID: <span th:text="${#strings.substring(subscription.id.toString(), 0, 8)}">...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="back-button-container">
            <a th:href="@{/home}" class="btn back-button">
                ‚Üê –ù–∞–∑–∞–¥ –∫—ä–º —Ç–∞–±–ª–æ—Ç–æ
            </a>
        </div>
    </div>
</main>

<th:block th:replace="~{fragments/footer :: siteFooter}"></th:block>
</body>
</html>

